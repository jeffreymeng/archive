<!DOCTYPE html>
<html>

<head>
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Jeffrey Meng">
    <link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/css/footer.min.css">

    <link rel="stylesheet" type="text/css" href="/fontawesome/css/fa-svg-with-js.css">
    <script src="/fontawesome/js/fa-solid.min.js"></script>
    <script src="/fontawesome/js/fontawesome.min.js"></script>

    <title>Boy Scout Trips - Jeffrey Archives</title>
    
</head>

<body>
    <div class="container">
        <div class="col-lg-12">
            <h1>Jeffrey Scouting Archives</h1>
            <!--<p class="text-muted">Welcome to the Jeffrey Archives</p>-->
            <nav class="breadcrumb">
                <li class="breadcrumb-item"><a href="/">Home</a></li>
                <li class="breadcrumb-item"><a href="/bsa/">BSA</a></li>
                <li class="breadcrumb-item"><a href="/bsa/forms/">Forms</a></li>
                <li class="breadcrumb-item"><a href="/bsa/forms/dragons/">Dragons</a></li>
                <span class="breadcrumb-item active">Transition Party</span>
            </nav>

            <div id="content">
                <h1>Transition Party Survey</h1>
                <label for="name">What is your name?</label>
                <input type="text" id="name" class="form-control">
                <p class="text-danger" id="name-help"></p>
                <button class="btn btn-primary btn-block" id="enter" >Enter Form</button>
            </div>
        </div>
    </div>
    <div class="footer">
        <div class="footer-content text-center">
            Copyright &copy; 2017-2018 Jeffrey Meng
        </div>
    </div>
    <script src="/js/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script>
        $("#name").keyup(function(e) {
            
            if (e.which == 13) {
                $("#enter").click();
            }
        })
        $("#enter").click(function() {
            var names = JSON.parse(atob("WyJqYWNvYiBuaWUiLCJyaWNoYXJkIGxpdSIsImplZmZyZXkgbWVuZyIsImJyYW5kb24geXVhbiIsImRhbmllbCBsaW4iLCJqb25hdGhhbiB6aG91IiwibWF4IGxpYW4iLCJqYXNvbiBjaGVuIiwic2FtdWVsIHlhbyIsImxhbmRvbiB5YW5nIiwidGlhbnlpIGd1YW4iXQ"));
            var nameInput = $("#name").val();
            var fullNameRegex = new RegExp("([A-Za-z]){2,} ([A-Za-z]){2,}");
            var match = fullNameRegex.exec(nameInput);
            if (match == null) {

                // No match
                $("#name-help").html("Enter your first and last name, as it appears in the T485 Directory spreadsheet.");
            }
            else if (names.indexOf(nameInput.toLowerCase()) > -1) {
                window.location.href = "main/?key=" + encodeURIComponent(btoa(nameInput.toLowerCase()));
            }
            else {
                $("#name-help").html("You must be a current member of the Dragons patrol to fill out this form. Make sure your name exactly matches the one on the spreadsheet(case insensitive).");

            }
        });
    </script>
</body>

</html>
