<style>
    img {
        height: auto;
        width: 100%;
    }
    
    .hidden {
        display: none;
    }
</style>
<link rel="stylesheet" type="text/css" href="https://assets.jeffkmeng.com/bootstrap/3.3.6/css/bootstrap.min.css">
<div class="col-lg-12">
    <div id="files" class="list-group"></div>
</div>
<script src="https://assets.jeffkmeng.com/jquery/2.2.4/js/jquery.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/3.4.0/firebase.js"></script>
<script>
    /* global firebase */
    // Initialize Firebase
    var config = {
        apiKey: "AIzaSyB7qu5kfGdvmLSoghSrEmSmwu4AEsR4WKU",
        authDomain: "jdrive.firebaseapp.com",
        databaseURL: "https://jdrive.firebaseio.com",
        storageBucket: "firebase-jdrive.appspot.com",
        messagingSenderId: "242289245420"
    };
    firebase.initializeApp(config);
</script>
<script>
    /* global $ firebase */

    firebase.auth().onAuthStateChanged(function(user) {
        if (user) {

            // User is signed in.
            if (window.location.pathname.split("/")[1] === "other" && window.location.pathname.split("/")[2] === "view") {

                firebase.database().ref("/files/").on("child_added").then(function(data) {


                    //console.log(4);
                    var name = data.val().name;
                    var url = data.val().url;
                    //console.log(data);
                    //alert(url);
                    //console.log(url);
                    $("#files").append("<a class='list-group-item' href='" + url + "'>" + name + "</div>");

                });


            }
            else {
                $("#error404").removeClass("hidden");
            }
        }
        else {
            // No user is signed in.
            //window.location.href = "/login/";
            firebase.auth().signInAnonymously().catch(function(error) {
                console.log(error);
            });
            window.location.href = window.location.href;
        }
    });
</script>
